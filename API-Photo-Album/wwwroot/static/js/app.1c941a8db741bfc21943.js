webpackJsonp([1],{"0jMg":function(t,e){},"27ib":function(t,e){},"8eyI":function(t,e){},DA66:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i=n("bOdI"),a=n.n(i),s=n("mtWM"),r=n.n(s),l={data:function(){return{title:"Photo Album",isLogin:!1,userEmail:"alphcamp@mail.com"}},methods:a()({handleTitleClick:function(){this.$router.push("/")},handleNewPhotoClick:function(){this.$router.push("/photos/new")},handleSignUp:function(){this.$router.push("/signup")},handleLogin:function(){this.$router.push("/login")},handleLogout:function(){console.log("logout")},handleAuthState:function(t){console.dir(t);var e=t.action;"login"==e?(this.isLogin=!0,this.userEmail=JSON.parse(localStorage.getItem("photo-album-user")).email):"logout"==e&&(this.isLogin=!1,this.userEmail="")}},"handleLogout",function(){console.log("logout");var t=JSON.parse(localStorage.getItem("photo-album-user"));if(null!=t){var e=t.authToken;console.dir(e);r.a.post("https://localhost:44316/api/logout",{auth_token:e}).then(function(t){console.log(t)}).catch(function(t){console.error(t.response.data.erros)}),this.$bus.$emit("auth-state",{action:"logout"}),localStorage.removeItem("photo-album-user"),this.$router.push("/")}}),created:function(){this.$bus.$on("auth-state",this.handleAuthState),console.dir(localStorage),JSON.parse(localStorage.getItem("photo-album-user"))?this.handleAuthState({action:"login"}):this.handleAuthState({action:"logout"})},beforeDestroy:function(){this.$bus.$off("auth-state",this.handleAuthState)}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("h1",{on:{click:t.handleTitleClick}},[t._v(t._s(t.title))]),t._v(" "),n("p",{staticClass:"new-photo-btn btn",on:{click:t.handleNewPhotoClick}},[t._v("New Photo")]),t._v(" "),t.isLogin?n("div",{staticClass:"user-login-container"},[n("p",{staticClass:"user-email"},[t._v(t._s(t.userEmail))]),t._v(" "),n("p",{staticClass:"login-btn btn",on:{click:t.handleLogout}},[t._v("Log out")])]):n("div",{staticClass:"user-unlogin-container"},[n("p",{staticClass:"login-btn btn",on:{click:t.handleLogin}},[t._v("Login")]),t._v(" "),n("p",{staticClass:"signup-btn btn",on:{click:t.handleSignUp}},[t._v("Sign up")])])])},staticRenderFns:[]};var u={name:"App",components:{Header:n("VU/8")(l,c,!1,function(t){n("U7fj")},"data-v-2d8062c8",null).exports}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Header"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var d=n("VU/8")(u,p,!1,function(t){n("0jMg")},null,null).exports,h=n("/ocq"),m={props:{isLogin:{type:Boolean,default:!0},id:{type:Number,default:1},title:{type:String,default:"title"},description:{type:String,default:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quasi, exercitationem!"},url:{type:String,default:"http://via.placeholder.com/400x400"}},methods:{handleShow:function(){this.$router.push("/photos/"+this.id),console.log("show")},handleEdit:function(){this.$router.push("/photos/edit/"+this.id),console.log("edit")},handleDelete:function(){console.log("destroy")}},computed:{imgShow:function(){return{background:"url("+this.url+") no-repeat center",backgroundSize:"cover"}}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"photo-item"},[n("div",{staticClass:"photo",style:t.imgShow}),t._v(" "),n("h3",[t._v(t._s(t.title))]),t._v(" "),n("p",[t._v(t._s(t.description))]),t._v(" "),t.isLogin?n("div",{staticClass:"photo-btn-container"},[n("button",{on:{click:t.handleShow}},[t._v("Show")]),t._v(" "),n("button",{on:{click:t.handleEdit}},[t._v("Edit")]),t._v(" "),n("button",{on:{click:t.handleDelete}},[t._v("Destroy")])]):t._e()])},staticRenderFns:[]};var v={data:function(){return{isLogin:!1,photos:[]}},components:{ItemListElement:n("VU/8")(m,f,!1,function(t){n("8eyI")},"data-v-b7b54cf4",null).exports},methods:{handleAuthState:function(t){var e=t.action;"login"==e?this.isLogin=!0:"logout"==e&&(this.isLogin=!1)}},created:function(){this.$bus.$on("auth-state",this.handleAuthState),JSON.parse(localStorage.getItem("photo-album-user"))?this.handleAuthState({action:"login"}):this.handleAuthState({action:"logout"});var t=this;r.a.get("https://localhost:44316/api/Photos",{}).then(function(e){console.dir(e.data.data),t.photos=e.data.data}).catch(function(t){console.error(t.response.data)})},beforeDestroy:function(){this.$bus.$off("auth-state",this.handleAuthState)}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},t._l(t.photos,function(e,o){return n("div",{key:o,staticClass:"item-list"},[n("itemListElement",{attrs:{isLogin:t.isLogin,id:e.id,title:e.title,description:e.description,url:"https://localhost:44316"+e.file_location.url}})],1)}),0)},staticRenderFns:[]};var _=n("VU/8")(v,g,!1,function(t){n("pM3y")},"data-v-1f1dce55",null).exports,w=n("mvHQ"),b=n.n(w),S={props:["type"],data:function(){return{email:"",password:""}},computed:{content:function(){return"login"===this.type?"Login":"Sign up"}},methods:{handleSubmit:function(){var t={email:this.email,password:this.password};this.$emit("auth-panel-submit",t),console.log("submit auth"),console.dir(t)}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"auth-panel"},[n("h1",[t._v("Please "+t._s(t.content))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",name:"email",id:"email",placeholder:"Email Address"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",name:"password",id:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.handleSubmit}},[t._v(t._s(t.content))])])},staticRenderFns:[]};var y=n("VU/8")(S,C,!1,function(t){n("27ib")},"data-v-099e3ad4",null).exports,$={components:{AuthPanel:y},methods:{handleLogin:function(t){console.log("handleLogin");var e=this;r.a.post("https://localhost:44316/api/login",t).then(function(n){console.log("login success!"),console.log(n.data.auth_token);var o={authToken:n.data.auth_token,email:t.email};localStorage.setItem("photo-album-user",b()(o)),e.$bus.$emit("auth-state",{action:"login"}),e.$router.push("/")}).catch(function(t){console.error(t.response.data.errors)})}}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login"},[e("AuthPanel",{attrs:{type:"login"},on:{"auth-panel-submit":this.handleLogin}})],1)},staticRenderFns:[]};var D=n("VU/8")($,k,!1,function(t){n("DA66")},"data-v-62f36766",null).exports,L={components:{AuthPanel:y},methods:{handleSignUp:function(t){var e=this;r.a.post("https://localhost:44316/api/signup",t).then(function(t){console.log("Signup Success"),console.log(t.data),e.$router.push("/login")}).catch(function(t){console.error(t.response.data.errors)})}}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"signup"},[e("AuthPanel",{attrs:{type:"signup"},on:{"auth-panel-submit":this.handleSignUp}})],1)},staticRenderFns:[]};var E=n("VU/8")(L,x,!1,function(t){n("Xf4R")},null,null).exports,U={props:{url:{type:String,default:"http://via.placeholder.com/400x400"}},computed:{imgShow:function(){return{background:"url("+this.url+") no-repeat center",backgroundSize:"cover"}}}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{style:this.imgShow,attrs:{id:"img-panel"}})])},staticRenderFns:[]};var P=n("VU/8")(U,A,!1,function(t){n("tDXf")},"data-v-5a7af58c",null).exports,I={data:function(){return{title:"title",description:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dignissimos, cupiditate.",url:"",date:"2018-01-01"}},components:{ImgDisplay:P}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"show"},[n("div",{staticClass:"photo-container"},[n("ImgDisplay")],1),t._v(" "),n("div",{staticClass:"main-container"},[n("h3",{staticClass:"main-container"}),t._v(" "),n("p",{staticClass:"main-date"},[t._v(t._s(t.date))]),t._v(" "),n("p",{staticClass:"main-description"},[t._v(t._s(t.description))])])])},staticRenderFns:[]};var N=n("VU/8")(I,F,!1,function(t){n("UwHT")},"data-v-e2dca214",null).exports,T=n("IC97"),R={props:{title:{type:String,default:""},description:{type:String,default:""}},data:function(){return{newDate:new Date,newTitle:this.title,newDescription:this.description,file:""}},components:{Datepicker:T.a},methods:{handleFileChange:function(t){this.file=t.target.files[0],console.log(this.file)},handleSubmit:function(){var t={title:this.newTitle,date:this.newDate,description:this.newDescription,file_location:this.file};console.log("submit photo from"),console.dir(t),this.$emit("photo-form-submit",t)}}},V={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"photo-form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newTitle,expression:"newTitle"}],attrs:{type:"text",id:"title",placeholder:"Title"},domProps:{value:t.newTitle},on:{input:function(e){e.target.composing||(t.newTitle=e.target.value)}}}),t._v(" "),n("Datepicker",{attrs:{"wrapper-class":"date-wrapper","input-class":"date-input",format:"dd.MM.yyyy"},model:{value:t.newDate,callback:function(e){t.newDate=e},expression:"newDate"}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newDescription,expression:"newDescription"}],attrs:{name:"description",id:"description",placeholder:"description",rows:"7"},domProps:{value:t.newDescription},on:{input:function(e){e.target.composing||(t.newDescription=e.target.value)}}}),t._v(" "),n("div",{staticClass:"upload-container"},[n("input",{attrs:{type:"file",name:"upload-file-btn",id:"upload-file-btn"},on:{change:t.handleFileChange}})]),t._v(" "),n("button",{staticClass:"submit-btn",on:{click:t.handleSubmit}},[t._v("Submit")])],1)},staticRenderFns:[]};var M=n("VU/8")(R,V,!1,function(t){n("ept4"),n("ZG+n")},"data-v-54c32245",null).exports,H={components:{ImgDisplay:P,PhotoForm:M},methods:{postCreate:function(t){var e=this,n=JSON.parse(localStorage.getItem("photo-album-user")).authToken,o=new FormData;o.append("auth_token",n),o.append("title",t.title),o.append("date",t.date),o.append("description",t.description),o.append("file_location",t.file_location),r.a.post("https://localhost:44316/api/Photos",o,{header:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$router.push("/photos"+t.data.result.id)}).catch(function(t){console.error(t.response.data)})}}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"create"},[e("div",{staticClass:"photo-container"},[e("ImgDisplay")],1),this._v(" "),e("div",{staticClass:"main-container"},[e("PhotoForm",{on:{"photo-form-submit":this.postCreate}})],1)])},staticRenderFns:[]};var J=n("VU/8")(H,O,!1,function(t){n("krpM")},"data-v-03f26fdf",null).exports,j={components:{ImgDisplay:P,PhotoForm:M},data:function(){return{photo:{}}}},X={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"edit"},[e("div",{staticClass:"photo-container"},[e("ImgDisplay")],1),this._v(" "),e("div",{staticClass:"main-container"},[e("PhotoForm")],1)])},staticRenderFns:[]};var q=n("VU/8")(j,X,!1,function(t){n("Skqe")},"data-v-fdf993d8",null).exports;o.a.use(h.a);var z=new h.a({routes:[{path:"/Index",name:"Index",component:_},{path:"/Login",name:"Login",component:D},{path:"/SignUp",name:"SignUp",component:E},{path:"/Show",name:"Show",component:N},{path:"/Edit",name:"Edit",component:q},{path:"/New",name:"New",component:J}]});o.a.config.productionTip=!1,o.a.prototype.$bus=new o.a,new o.a({el:"#app",router:z,components:{App:d},template:"<App/>"})},Skqe:function(t,e){},U7fj:function(t,e){},UwHT:function(t,e){},Xf4R:function(t,e){},"ZG+n":function(t,e){},ept4:function(t,e){},krpM:function(t,e){},pM3y:function(t,e){},tDXf:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1c941a8db741bfc21943.js.map
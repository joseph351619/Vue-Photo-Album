webpackJsonp([1],{"+c8t":function(t,e){},"0jMg":function(t,e){},"27ib":function(t,e){},"4hwy":function(t,e){},"56qb":function(t,e){},Jsor:function(t,e){},NFex:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("7+uW"),a=o("bOdI"),i=o.n(a),s=o("mtWM"),r=o.n(s),l={data:function(){return{title:"Photo Album",isLogin:!1,userEmail:"alphcamp@mail.com"}},methods:i()({handleTitleClick:function(){this.$router.push("/")},handleNewPhotoClick:function(){this.$router.push("/photos/new")},handleSignUp:function(){this.$router.push("/signup")},handleLogin:function(){this.$router.push("/login")},handleLogout:function(){console.log("logout")},handleAuthState:function(t){console.dir(t);var e=t.action;"login"==e?(this.isLogin=!0,this.userEmail=JSON.parse(localStorage.getItem("photo-album-user")).email):"logout"==e&&(this.isLogin=!1,this.userEmail="")}},"handleLogout",function(){console.log("logout");var t=JSON.parse(localStorage.getItem("photo-album-user"));if(null!=t){var e=t.authToken;console.dir(e);r.a.post("https://localhost:5001/api/logout",{auth_token:e}).then(function(t){console.log(t)}).catch(function(t){console.error(t.response.data.erros)}),this.$bus.$emit("auth-state",{action:"logout"}),localStorage.removeItem("photo-album-user"),this.$router.push("/")}}),created:function(){this.$bus.$on("auth-state",this.handleAuthState),console.dir(localStorage),JSON.parse(localStorage.getItem("photo-album-user"))?this.handleAuthState({action:"login"}):this.handleAuthState({action:"logout"})},beforeDestroy:function(){this.$bus.$off("auth-state",this.handleAuthState)}},c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"header"},[o("h1",{on:{click:t.handleTitleClick}},[t._v(t._s(t.title))]),t._v(" "),o("p",{staticClass:"new-photo-btn btn",on:{click:t.handleNewPhotoClick}},[t._v("New Photo")]),t._v(" "),t.isLogin?o("div",{staticClass:"user-login-container"},[o("p",{staticClass:"user-email"},[t._v(t._s(t.userEmail))]),t._v(" "),o("p",{staticClass:"login-btn btn",on:{click:t.handleLogout}},[t._v("Log out")])]):o("div",{staticClass:"user-unlogin-container"},[o("p",{staticClass:"login-btn btn",on:{click:t.handleLogin}},[t._v("Login")]),t._v(" "),o("p",{staticClass:"signup-btn btn",on:{click:t.handleSignUp}},[t._v("Sign up")])])])},staticRenderFns:[]};var u={name:"App",components:{Header:o("VU/8")(l,c,!1,function(t){o("u0ry")},"data-v-1044ec7f",null).exports}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Header"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var h=o("VU/8")(u,p,!1,function(t){o("0jMg")},null,null).exports,d=o("/ocq"),m={props:{isLogin:{type:Boolean,default:!0},id:{type:Number,default:1},title:{type:String,default:"title"},description:{type:String,default:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quasi, exercitationem!"},url:{type:String,default:"http://via.placeholder.com/400x400"}},methods:{handleShow:function(){this.$router.push("/photos/"+this.id),console.log("show")},handleEdit:function(){this.$router.push("/photos/edit/"+this.id),console.log("edit")},handleDelete:function(){console.log("destroy");var t=this,e="https://localhost:5001/api/Photos/"+this.id,o={auth_token:JSON.parse(localStorage.getItem("photo-album-user")).authToken};r.a.delete(e,{params:o}).then(function(e){console.log(e),t.$emit("destroy-item",{id:t.id})}).catch(function(t){console.error(t.response.data)})}},computed:{imgShow:function(){return{background:"url("+this.url+") no-repeat center",backgroundSize:"cover"}}}},f={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"photo-item"},[o("div",{staticClass:"photo",style:t.imgShow}),t._v(" "),o("h3",[t._v(t._s(t.title))]),t._v(" "),o("p",[t._v(t._s(t.description))]),t._v(" "),t.isLogin?o("div",{staticClass:"photo-btn-container"},[o("button",{on:{click:t.handleShow}},[t._v("Show")]),t._v(" "),o("button",{on:{click:t.handleEdit}},[t._v("Edit")]),t._v(" "),o("button",{on:{click:t.handleDelete}},[t._v("Destroy")])]):t._e()])},staticRenderFns:[]};var g={data:function(){return{isLogin:!1,photos:[]}},components:{ItemListElement:o("VU/8")(m,f,!1,function(t){o("+c8t")},"data-v-b01eb5e4",null).exports},methods:{handleAuthState:function(t){var e=t.action;"login"==e?this.isLogin=!0:"logout"==e&&(this.isLogin=!1)},handleDestroyItem:function(t){console.log("delete photo "+t),this.photos.splice(t,1)}},created:function(){this.$bus.$on("auth-state",this.handleAuthState),JSON.parse(localStorage.getItem("photo-album-user"))?this.handleAuthState({action:"login"}):this.handleAuthState({action:"logout"});var t=this;r.a.get("https://localhost:5001/api/Photos",{}).then(function(e){console.dir(e.data.data),t.photos=e.data.data}).catch(function(t){console.error(t.response.data)})},beforeDestroy:function(){this.$bus.$off("auth-state",this.handleAuthState)}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},t._l(t.photos,function(e,n){return o("div",{key:e.id,staticClass:"item-list"},[o("itemListElement",{attrs:{isLogin:t.isLogin,id:e.id,title:e.title,description:e.description,url:"https://localhost:5001/"+e.file_location.url},on:{"destroy-item":function(e){return t.handleDestroyItem(n)}}})],1)}),0)},staticRenderFns:[]};var _=o("VU/8")(g,v,!1,function(t){o("whzf")},"data-v-07706329",null).exports,b=o("mvHQ"),w=o.n(b),S={props:["type"],data:function(){return{email:"",password:""}},computed:{content:function(){return"login"===this.type?"Login":"Sign up"}},methods:{handleSubmit:function(){var t={email:this.email,password:this.password};this.$emit("auth-panel-submit",t),console.log("submit auth"),console.dir(t)}}},y={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"auth-panel"},[o("h1",[t._v("Please "+t._s(t.content))]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",name:"email",id:"email",placeholder:"Email Address"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",name:"password",id:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),o("button",{on:{click:t.handleSubmit}},[t._v(t._s(t.content))])])},staticRenderFns:[]};var $=o("VU/8")(S,y,!1,function(t){o("27ib")},"data-v-099e3ad4",null).exports,C={components:{AuthPanel:$},methods:{handleLogin:function(t){console.log("handleLogin");var e=this;r.a.post("https://localhost:5001/api/login",t).then(function(o){console.log("login success!"),console.log(o.data.auth_token);var n={authToken:o.data.auth_token,email:t.email};localStorage.setItem("photo-album-user",w()(n)),e.$bus.$emit("auth-state",{action:"login"}),e.$router.push("/")}).catch(function(t){console.error(t.response.data.errors)})}}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login"},[e("AuthPanel",{attrs:{type:"login"},on:{"auth-panel-submit":this.handleLogin}})],1)},staticRenderFns:[]};var D=o("VU/8")(C,k,!1,function(t){o("Jsor")},"data-v-0d71e2af",null).exports,I={components:{AuthPanel:$},methods:{handleSignUp:function(t){var e=this;r.a.post("https://localhost:5001/api/signup",t).then(function(t){console.log("Signup Success"),console.log(t.data),e.$router.push("/login")}).catch(function(t){console.error(t.response.data.errors)})}}},L={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"signup"},[e("AuthPanel",{attrs:{type:"signup"},on:{"auth-panel-submit":this.handleSignUp}})],1)},staticRenderFns:[]};var P=o("VU/8")(I,L,!1,function(t){o("56qb")},null,null).exports,x={props:{url:{type:String,default:"http://via.placeholder.com/400x400"}},computed:{imgShow:function(){return{background:"url("+this.url+") no-repeat center",backgroundSize:"cover"}}}},E={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{style:this.imgShow,attrs:{id:"img-panel"}})])},staticRenderFns:[]};var N=o("VU/8")(x,E,!1,function(t){o("tDXf")},"data-v-5a7af58c",null).exports,F={data:function(){return{title:"title",description:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dignissimos, cupiditate.",url:"",date:"2018-01-01"}},components:{ImgDisplay:N},created:function(){var t=this,e="https://localhost:5001/api/Photos/"+this.$route.params.id;if(localStorage.getItem("photo-album-user"))JSON.parse(localStorage.getItem("photo-album-user")).authToken;r.a.get(e).then(function(e){t.title=e.data.title,t.date=e.data.date,t.description=e.data.description,t.url="https://localhost:5001/"+e.data.file_location.url}).catch(function(e){console.error(e.response.data),t.$router.push("/login")})}},T={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"show"},[o("div",{staticClass:"photo-container"},[""!=t.url&&null!=t.url?o("ImgDisplay",{attrs:{url:t.url}}):t._e()],1),t._v(" "),o("div",{staticClass:"main-container"},[o("h3",{staticClass:"main-container"}),t._v(" "),o("p",{staticClass:"main-date"},[t._v(t._s(t.date))]),t._v(" "),o("p",{staticClass:"main-description"},[t._v(t._s(t.description))])])])},staticRenderFns:[]};var U=o("VU/8")(F,T,!1,function(t){o("NFex")},"data-v-2732b686",null).exports,A=o("IC97"),V={props:{title:{type:String,default:""},description:{type:String,default:""}},data:function(){return{newDate:new Date,newTitle:this.title,newDescription:this.description,file:""}},components:{Datepicker:A.a},methods:{handleFileChange:function(t){this.file=t.target.files[0],console.log(this.file)},handleSubmit:function(){var t={title:this.newTitle,date:this.newDate.toISOString(),description:this.newDescription,file_location:this.file};console.log("submit photo from"),console.dir(t),this.$emit("photo-form-submit",t)}}},J={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"photo-form"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newTitle,expression:"newTitle"}],attrs:{type:"text",id:"title",placeholder:"Title"},domProps:{value:t.newTitle},on:{input:function(e){e.target.composing||(t.newTitle=e.target.value)}}}),t._v(" "),o("Datepicker",{attrs:{"wrapper-class":"date-wrapper","input-class":"date-input",format:"dd.MM.yyyy"},model:{value:t.newDate,callback:function(e){t.newDate=e},expression:"newDate"}}),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newDescription,expression:"newDescription"}],attrs:{name:"description",id:"description",placeholder:"description",rows:"7"},domProps:{value:t.newDescription},on:{input:function(e){e.target.composing||(t.newDescription=e.target.value)}}}),t._v(" "),o("div",{staticClass:"upload-container"},[o("input",{attrs:{type:"file",name:"upload-file-btn",id:"upload-file-btn"},on:{change:t.handleFileChange}})]),t._v(" "),o("button",{staticClass:"submit-btn",on:{click:t.handleSubmit}},[t._v("Submit")])],1)},staticRenderFns:[]};var O=o("VU/8")(V,J,!1,function(t){o("4hwy"),o("TiM0")},"data-v-cdb084ec",null).exports,R={components:{ImgDisplay:N,PhotoForm:O},methods:{postCreate:function(t){var e=this,o=JSON.parse(localStorage.getItem("photo-album-user")).authToken,n=new FormData;n.append("auth_token",o),n.append("title",t.title),n.append("date",t.date),n.append("description",t.description),n.append("file_location",t.file_location),r.a.post("https://localhost:5001/api/Photos",n,{header:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$router.push("/photos"+t.data.result.id)}).catch(function(t){console.error(t.response.data)})}}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"create"},[e("div",{staticClass:"photo-container"},[e("ImgDisplay")],1),this._v(" "),e("div",{staticClass:"main-container"},[e("PhotoForm",{on:{"photo-form-submit":this.postCreate}})],1)])},staticRenderFns:[]};var z=o("VU/8")(R,M,!1,function(t){o("gwcV")},"data-v-7d7ac31f",null).exports,H={components:{ImgDisplay:N,PhotoForm:O},methods:{patchUpdate:function(t){var e=this,o="https://localhost:5001/api/Photos/"+this.$route.params.id,n=JSON.parse(localStorage.getItem("photo-album-user")).authToken,a=new FormData;a.append("auth_token",n),a.append("title",t.title),a.append("date",t.date),a.append("description",t.description),a.append("file_location",t.file_location),console.log(a),r.a.put(o,a,{headers:{"Content-Type":"multiple/form-data"}}).then(function(t){e.$router.push("/photos/"+t.data.result.id)}).catch(function(t){console.error(t.response.data)})}},data:function(){return{photo:{}}},created:function(){var t=this,e="https://localhost:5001/api/Photos/"+this.$route.params.id,o={auth_token:JSON.parse(localStorage.getItem("photo-album-user")).authToken};r.a.get(e,{params:o}).then(function(e){t.photo=e.data}).catch(function(t){console.error(t.response.data)})}},Q={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"edit"},[o("div",{staticClass:"photo-container"},[t.photo.file_location?o("ImgDisplay",{attrs:{url:"https://localhost:5001/"+t.photo.file_location.url}}):t._e()],1),t._v(" "),o("div",{staticClass:"main-container"},[t.photo.title?o("PhotoForm",{attrs:{title:t.photo.title,description:t.photo.description},on:{"photo-form-submit":t.patchUpdate}}):t._e()],1)])},staticRenderFns:[]};var j=o("VU/8")(H,Q,!1,function(t){o("zbQI")},"data-v-0d36df64",null).exports;n.a.use(d.a);var q=new d.a({routes:[{path:"/Index",name:"Index",component:_},{path:"/Login",name:"Login",component:D},{path:"/SignUp",name:"SignUp",component:P},{path:"/Photos/:id",name:"Show",component:U},{path:"/Photos/Edit/:id",name:"Edit",component:j},{path:"/New",name:"New",component:z}]});n.a.config.productionTip=!1,n.a.prototype.$bus=new n.a,new n.a({el:"#app",router:q,components:{App:h},template:"<App/>"})},TiM0:function(t,e){},gwcV:function(t,e){},tDXf:function(t,e){},u0ry:function(t,e){},whzf:function(t,e){},zbQI:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c9d0eb21475b46378819.js.map